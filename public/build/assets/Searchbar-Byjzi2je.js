import{r as a,j as e,i as v,a as d}from"./react-select.esm-AIjEkChc.js";const j=({searchValue:h,setSearchValue:c,populateData:m})=>{const[f,o]=a.useState(!1),[i,r]=a.useState([]),[g,p]=a.useState(null),n=a.useRef(null),l=t=>{d.get("articles/"+t).then(s=>{m({data:[s.data]}),r([])})},u=t=>{if(c(t),t.length===0){r([]);return}o(!0),clearTimeout(g),p(setTimeout(()=>{d.get("articles-liste",{params:{search:t}}).then(s=>{if(o(!1),s.data.length===1){l(s.data[0].id);return}r(s.data)}).catch(s=>{o(!1)})},1e3))};return a.useEffect(()=>{const t=s=>{n.current&&!n.current.contains(s.target)&&r([])};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[n]),e.jsxs("div",{className:"input-group position-relative z-10",ref:n,children:[e.jsx("input",{autoComplete:"off",id:"search",className:"form-control",placeholder:"Rechercher un produit...",value:h,onChange:()=>c(event.target.value),onInput:()=>u(event.target.value),onFocus:()=>u(event.target.value)}),e.jsx("button",{className:"btn btn-light",children:f?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),e.jsx("span",{className:"sr-only",children:"Loading..."})]}):e.jsx("i",{className:"fa fa-search"})}),i&&i.length>0&&e.jsx(v,{items:i,validateSearchById:l})]})};export{j as S};
