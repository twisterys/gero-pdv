import{a,j as e,c as d}from"./axios-CQWDBATz.js";import{f as v}from"./react-select.esm-BRJRBPZF.js";const b=({searchValue:m,setSearchValue:i,populateData:h})=>{const[f,o]=a.useState(!1),[c,r]=a.useState([]),[p,g]=a.useState(null),n=a.useRef(null),l=t=>{d.get("articles/"+t).then(s=>{h({data:[s.data]}),r([])})},u=t=>{if(i(t),t.length===0){r([]);return}o(!0),clearTimeout(p),g(setTimeout(()=>{d.get("articles-liste",{params:{search:t}}).then(s=>{if(o(!1),s.data.length===1){l(s.data[0].id);return}r(s.data)}).catch(s=>{o(!1)})},1e3))};return a.useEffect(()=>{const t=s=>{n.current&&!n.current.contains(s.target)&&r([])};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[n]),e.jsxs("div",{className:"input-group position-relative z-10",ref:n,children:[e.jsx("input",{autoComplete:"off",id:"search",className:"form-control",placeholder:"Rechercher un produit...",value:m,onChange:()=>i(event.target.value),onInput:()=>u(event.target.value),onFocus:()=>u(event.target.value)}),e.jsx("button",{className:"btn btn-light",children:f?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),e.jsx("span",{className:"sr-only",children:"Loading..."})]}):e.jsx("i",{className:"fa fa-search"})}),c&&c.length>0&&e.jsx(v,{items:c,validateSearchById:l})]})};export{b as S};
